extends ../../layouts/defaults.pug
include ../../mixins/filterButton.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/alert.pug

block main
  .card-header <h1>Danh mục sản phẩm<h1>
  +alert-success()
   
  .card.mb-3
  .card-header Bộ lọc và Tìm kiếm
  .card-body
    .row 
      .col-6
        +filterButton(button)
      .col-6
        form#form-search
          +Search(keyword)

  .card.mb-3
  .card-header Sắp xếp
  .card-body
    .row
      .col-6
        div(sort)
          select.form-control(name="sort" sort-select)
            option(value="position-desc") Vị trí giảm dần
            option(value="position-asc") Vị trí tăng dần
            option(value="title-asc") Tiêu đề A - Z
            option(value="title-desc") Tiêu đề Z - A
      .col-6
        button.btn.btn-danger(sort-clear) Clear

  .card.mb-3
  
  .card-body
    .row 
      .col-8 
        +form-change-multi(`${prefitAdmin}/products-category/change-multi?_method=PATCH`)
      .col-4
        a.btn.btn-outline-success(href=`${prefitAdmin}/products-category/create`) Thêm mới
    table(
      class="table table-hover table-sm"
      checkbox-multi
    )
      thead
        tr
          th 
            input(type="checkbox" name="checkall")
          th STT
          th Hình ảnh
          th Tiêu đề
          th Vị trí
          th Trạng thái
          th Hành động
      tbody
        each item, index in record
          tr
            td
              input(type="checkbox" name="id" value=item.id)
            td #{index+1}
            td
              img(src=item.thumbnail, alt=item.title, width="100px", height="auto" class="img-item")
            td #{item.title}
            td
              input(
                type="number"
                value=item.position
                style="width: 60px"
                min="1"
                name="position"
              )
            td
              if item.status === "active"
                a(
                href="javascript:" 
                data-status=item.status
                data-id=item.id 
                button-change-status
                class="badge badge-success"
                ) Hoạt động
              else
                a(
                  href="javascript:" 
                  data-status=item.status
                  data-id=item.id 
                  button-change-status
                  class="badge badge-danger"
                ) Dừng hoạt động
            td
              a(
                class="btn btn-success btn-sm mr-1"
                href=`${prefitAdmin}/products-category/detail/${item.id}`
                ) Chi tiết
              a(
                class="btn btn-warning btn-sm"
                href=`${prefitAdmin}/products-category/edit/${item.id}`
                ) Sửa
              button(
                class="btn btn-danger btn-sm ml-1"
                button-delete
                id-delete=item.id
                ) Xóa


  +pagination(pagination)

  form(
    action="" 
    method="POST"
    id="form-change-status"
    data-path=`${prefitAdmin}/products-category/change-status`
    ) 
  form(
    action="" 
    method="POST"
    id="form-delete-item"
    data-path=`${prefitAdmin}/products-category/delete`
  ) 


  script(src="/admin/js/products.js") 



    